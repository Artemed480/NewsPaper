#Задания в Django shell
#Задание-1
user1 = User.objects.create_user(username='username1')
user2 = User.objects.create_user(username='username2')
user3 = User.objects.create_user(username='username3')
#Задание-2
author1 = Author.objects.create(author_user=user1)
author2 = Author.objects.create(author_user=user2)
author3 = Author.objects.create(author_user=user3)
#Задание-3
category1 = Category.objects.create(category_name='Politics')
category2 = Category.objects.create(category_name='Celebrities')
category3 = Category.objects.create(category_name='IT')
category4 = Category.objects.create(category_name='Science')
#Задание-4
article1 = Post.objects.create(autor=author1, post_type='AR', post_title='Article 1', post_text='Article Text 1')
article2 = Post.objects.create(autor=author2, post_type='AR', post_title='Article 2', post_text='Article Text 2')
news1 = Post.objects.create(autor=author1, post_type='NW', post_title='News 1', post_text='News Text 1')
news2 = Post.objects.create(autor=author3, post_type='NW', post_title='Новости Зеленограда', post_text='В Московской области, в городе Зеленоград началось строительства тунеля под желенодорожными путями, планируемая дата сдачи обьекта 2025 год. Данные тунель призван улучшить транспортную ситуацию в час пик, таким образом улучшив жизнь горожан')
article3 = Post.objects.create(autor_id=13, post_type='AR', post_title='«Челси» объявил цену Хаверца', post_text='23-летний футболист в приватной беседе с одним из представителей руководства «Челси» заявил, что хотел бы покинуть клуб в предстоящее летнее трансферное окно.Основными претендентами на Хаверца считаются мадридский «Реал» и мюнхенская «Бавария».В прошедшем сезоне Английской премьер-лиги (АПЛ) Хаверц провел 35 матчей, в которых забил семь мячей и отдал одну результативную передачу.')
article4 = Post.objects.create(autor_id=14, post_type='AR', post_title='Wildberries втрое снизил взнос', post_text='В Wildberries уточнили, что в сентябре маркетплейс ввел гарантийный взнос в размере 30 тыс. руб. для новых продавцов при регистрации личного кабинета «для предотвращения случаев мошенничества на платформе». В частности, отмечают в компании, это требовалось для борьбы с теми, кто создает фейковые карточки товаров и личные кабинеты.')
article5 = Post.objects.create(autor_id=15, post_type='AR', post_title='Смолов объявил об уходе из сборной России', post_text='высказался о перспективах выступления за национальную команду в обозримом будущем.По его словам, в ближайшей перспективе этого не предвидится.«Сыграю я когда-нибудь еще в официальном матче за сборную России? Нет, к сожалению. Я с этой идеей простился. Ввиду событий, которые происходят, не вижу даже в обозримом будущем возвращения ')
article6 = Post.objects.create(autor_id=13, post_type='AR', post_title='Талалаев остается в «Химках»', post_text='высказался о своем будущем.По его словам, вылет в Первую лигу по итогам сезона-2022/23 никак не повлияет на его настрой продолжить работу в стане красно-черных.«Абсолютно точно могу сказать — я остаюсь в «Химках». Я подписал пятилетний контракт, по-другому быть и не может! Мы сделаем все возможное, чтобы вернуться обратно», — приводит слова Талалаева')
article7 = Post.objects.create(autor_id=14, post_type='AR', post_title='МОК созывает экстренное заседание', post_text='По информации источника, IBA опубликовала отчет, в котором заявила, что выполнила условия для снятия дисквалификации и готова вернуться к организации олимпийских соревнований по боксу в 2024 году.Предварительное заседание, на которой должна была обсуждаться эта тема, была запланирована на 20-22 июня. Заседание исполнительного совета МОК пройдет 7 июня в дистанционном формате.Напомним, что IBA была дисквалифицирована в 2019 году из-за управленческих, финансовых и этических проблем. Турнир по боксу на ОИ-2020 был организован самим МОК.')
article8 = Post.objects.create(autor_id=15, post_type='AR', post_title='Джорджевич может покинуть «Сочи»', post_text='высказался о переговорном процессе с руководством черноморского клуба о подписании нового контракта.По его словам, сочинцы предлагают черногорцу довольно скромный трудовой договор.«Сочи» сделал предложение, от которого мы отказались. К Луке не относятся с уважением в клубе.Я отказался от нового контрактного предложения. Условия по новому соглашению далеки от желаемых», — приводит слова Глушевича')
article9 = Post.objects.create(autor_id=13, post_type='AR', post_title='УЕФА надавил на «Ювентус»', post_text='УЕФА объяснил свои действия одной из возможных мер наказания за финансовые махинации.Источники в Суперлиге оказались шокированы подобным ходом от УЕФА и заявили о готовности отстаивать свои права в правовой плоскости.Напомним, что после выхода «Ювентуса», в проекте Суперлиги остались два участника — мадридский «Реал» и «Барселона».Ранее сообщалось, что полузащитник лондонского «Челси» и сборной')
article10 = Post.objects.create(autor_id=14, post_type='AR', post_title='Вслед за Бензема', post_text='где продолжат согласование последних деталей трудового соглашения.Текущий контракт Канте с «Челси» истекает в июне 2023 года. В сезоне-2022/23 Английской премьер-лиги (АПЛ) хавбек провел на поле семь матчей и отметился одной результативной передачей.Напомним, что в 2018 году Канте вместе со своей сборной стал чемпионом мира, а в 2021 году выиграл Лигу чемпионов.')
news3 = Post.objects.create(autor_id=13, post_type='NW', post_title='Выборы мэра Москвы', post_text='РИА Новости. Московская городская дума назначила выборы мэра Москвы на 10 сентября, такое решение было принято на заседании столичного парламента в среду.«"Принятие и официальное опубликование данного постановления даст официальный старт избирательной кампании мэра Москвы 2023 года", - пояснил Шапошников.Он отметил, что днем единого голосования на выборах в органы государственной власти субъектов РФ предусмотрено второе воскресенье сентября того года, в котором истекают сроки полномочий указанных органов.')
news4 = Post.objects.create(autor_id=14, post_type='NW', post_title='Хаддад Майя вышла в полуфинал', post_text='разильянка Беатрис Хаддад Майя обыграла представительницу Туниса Онс Жабер в четвертьфинальном матче Открытого чемпионата Франции по теннису, который проходит на грунтовых кортах Парижа.Встреча завершилась со счетом 3:6, 7:6 (7:5), 6:1 в пользу спортсменки из Бразилии, посеянной на турнире под 14-м номером. Жабер имела седьмой номер посева. Теннисистки провели на корте 2 часа 29 минут.')
news5 = Post.objects.create(autor_id=15, post_type='NW', post_title='Легенда "Реала" может возглавить "Хетафе"', post_text='По информации издания, "Хетафе" рассмотрит вариант с назначением Рауля, если нынешний главный тренер команды Хосе Бордалас не станет продлевать контракт с клубом. Он возглавил "Хетафе" в апреле этого года и помог команде сохранить прописку в Ла Лиге.')
news6 = Post.objects.create(autor_id=13, post_type='NW', post_title='Месси готов бесплатно играть за «Барселону»', post_text='Аргентинский нападающий Лионель Месси выразил желание вернуться в «Барселону».По информациadena SER, Месси вместе со своим отцом попросили у «Интер Майами» и «Аль-Хиляля» помочь в осуществлении данной сделки.Информации о том, как эти клубы могут совершить подобный переход, пока нет.Отмечалось, что одним из вариантов продолжения европейской карьеры Месси является переход в «Интер Майами» с последующей арендой в стан сине-гранатовых.Сам Месси выразил готовность выступать за «Барсу» на безвозмездной основе.')
news7 = Post.objects.create(autor_id=14, post_type='NW', post_title='Популярный мотогонщик разбился насмерть в возрасте 46 лет', post_text='Спортсмен разбился на третьем круге во время первой гонки Supertwin между отметками 16 и 17 миль.«Его улыбка была невероятно заразительной, Рауль был знаменитым членом семьи паддоков. Его любовь к гонкам ТТ была очевидна для всех, кто хотя бы раз общался с ним.Потеря такого страстного любителя мотогонок глубоко опечалила всех ценителей движения гонок ТТ», — говорится в некрологе.Мартинес провел дебютную гонку в 2017 году. За это время он 18 раз выигрывал медали гонок ТТ.')
news8 = Post.objects.create(autor_id=15, post_type='NW', post_title='Экс-игрок «Анжи» попался с мефедроном', post_text='Полицейские остановили Гасанова за переход в неположенном месте, после чего приняли решение досмотреть его из-за необычного поведения.В кармане у футболиста был обнаружен сверток с мефедроном в размере 0,54 грамма.В настоящее время 29-летний защитник защищает цвета команды «Сухран» из Узбекистана.Главным спортивным достижением Гасанова является победа во втором дивизионе Футбольной национальной лиги (ФНЛ-2) вместе с махачкалинским «Динамо».')
news9 = Post.objects.create(autor_id=13, post_type='NW', post_title='Менеджер Усика выставил ультиматум команде Фьюри', post_text='По его словам, британскому спортсмену необходимо либо соглашаться на предложенные условия, либо отказываться от участия в чемпионском бою.«Сторона Фьюри получит официальное предложение письменное предложение очень скоро. Тайсон решит, принимать его или нет.Мы сделали все от себя зависящее, чтобы этот бой состоялся. Теперь мяч на стороне Фьюри.Если он согласится, то получит крупнейший бой в карьере. Если он будет пытаться что-то выторговать или увильнуть, то это будет говорить о том, что Тайсон несерьезен», — заявил Красюк')
news10 = Post.objects.create(autor_id=14, post_type='NW', post_title='Яшкин перешел в «Ак Барс»', post_text='Чешский форвард подписал с татарстанским клубом трехлетний трудовой договор.В завершившемся сезоне Континентальной хоккейной лиги (КХЛ) Яшкин выступал за петербургский СКА. В нем хоккеист был признан самым ценным игроком, набрав 62 очка по системе «гол + пас» за 67 матчей, и стал бронзовым призером чемпионата России.Всего в КХЛ игрок провел 214 матчей, в которых забросил 122 шайбы и отдал 84 результативных передачи.В Кубке Гагарина — 2023 казанский клуб под руководством Зинетулы Билялетдинова добрался до финала, где в семиматчевой серии уступил столичному ЦСКА.')
news11 = Post.objects.create(autor_id=14, post_type='NW', post_title='Сенат Швейцарии', post_text='Сейчас нас интересуют параметры запроса. Именно через них мы можем указать номер страницы или фильтрацию. При этом в любой момент пользователь может скопировать текущий URL открытой страницы браузера и отправить его знакомому или сохранить в закладках. Так как параметры запроса хранились в URL, при следующем открытии пользователь получит скорее всего те же данные, что видел в последний раз. Но это, конечно, если не брать во внимание, что приложение, которое отвечает за вывод информации на сайте, может вернуть другие данные. Например, из-за того, что в базе появились новые записи или изменился код самого приложения.')
#Задание-5
PostCategory.objects.create(post_through=article1, category_through=category1)
PostCategory.objects.create(post_through=article1, category_through=category3)
PostCategory.objects.create(post_through=article2, category_through=category4)
PostCategory.objects.create(post_through=article2, category_through=category4)
PostCategory.objects.create(post_through=news1, category_through=category2)
PostCategory.objects.create(post_through=news1, category_through=category3)
#Задание-6
comment1 = Comment.objects.create(comment_post=article1, comment_user=user2, comment_text='Com1')
comment2 = Comment.objects.create(comment_post=article1, comment_user=user1, comment_text='Com2')
comment3 = Comment.objects.create(comment_post=article2, comment_user=user1, comment_text='Com3')
comment4 = Comment.objects.create(comment_post=news1, comment_user=user2, comment_text='Com4')
#Задание-7
article1.like()
article2.like()
article1.like()
article2.like()
news1.like()
news1.like()
article1.dislike()
news1.dislike()

comment1.like()
comment1.like()
comment1.like()
comment2.like()
comment2.like()
comment3.like()
comment4.like()
comment4.dislike()
comment1.dislike()
#Задание-8
author1.update_rating()
author2.update_rating()
#Задание-9
best_user = Author.objects.order_by('-author_rating').values('author_user__username', 'author_rating').first()
print(f"Лучший пользователь: {best_user['author_user__username']} с рейтингом {best_user['author_rating']}")
#Задание-10
best_article = Post.objects.filter(post_type='AR').order_by('-rating').first()
print('Лучшая статья:', best_article.post_data_time.strftime('%d.%m.%y %H:%M:%S'), best_article.autor.author_user.username,
      best_article.post_title, best_article.preview(), sep='\n')
#Задание-11
comments = Comment.objects.filter(comment_post=best_article)
for c in comments:
      print(f"дата: {c.comment_data_time.strftime('%d.%m.%y %H:%M:%S')}, пользователь: {c.comment_user.username}, "
            f"рейтинг {c.rating}, текст комментария: {c.comment_text}")